<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>TUT: C++ Template Unit Test Framework</title>
    <link rel="shortcut icon" href="tut.ico" />
    <meta charset='utf-8'>
    <meta name="keywords" content="C++ Unit Test Simple" />
    <meta name="description" content="TUT: C++ Template Unit Test Framework" />
    <meta name="generator" content="webgen - http://webgen.rubyforge.com/" />
    <link href="default.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <a href="https://github.com/mrzechonek/tut-framework"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
    <div id="header">
      <h1>
        <a href="http://tut-framework.sourceforge.net/"><img src="tut.png" alt="tut logo"/></a>
        C++ Template Unit Test Framework
      </h1>
    </div>

    <div id="menu">
        <ul><li class="webgen-menu-level1"><a href="index.html" hreflang="en">Introduction</a></li><li class="webgen-menu-level1"><a href="news.html" hreflang="en">News</a></li><li class="webgen-menu-level1"><a href="download.html" hreflang="en">Download</a></li><li class="webgen-menu-level1"><a href="example.html" hreflang="en">Example</a></li><li class="webgen-menu-level1 webgen-menu-item-selected"><a href="howto.html" hreflang="en">How To</a></li><li class="webgen-menu-level1"><a href="faq.html" hreflang="en">FAQ</a></li><li class="webgen-menu-level1"><a href="authors.html" hreflang="en">Authors</a></li><li class="webgen-menu-level1"><a href="links.html" hreflang="en">Links</a></li><li class="webgen-menu-level1"><a href="copyright.html" hreflang="en">Copyright</a></li><li class="webgen-menu-level1"><a href="https://github.com/mrzechonek/tut-framework/issues">Issues</a></li><li class="webgen-menu-level1"><a href="doxygen/index.html">Reference Manual</a></li></ul>
    </div>

    <div id="body">
        <h1><span>minimum steps to make TUT work for you</span>How To </h1>
        
<h2 id="tests-organization">Tests organization</h2>

<p>Tests are compiled into a single binary (a test application).</p>

<p>The test application contains tests organized into test groups. Every test group
has a human-readable name (such as “payroll”). Normally every group is located
in it’s own source file. A group can contain an unlimited number
of tests. Every test has an unique number as test identifier (
C++ templates do not support specialization by a string value). </p>

<h2 id="tests">Tests</h2>

<p>A test is a function (method) implementing some specific scenario and checking 
if the code (unit) works as required. Every test usually checks only one specific 
bit of functionality. In every test we have a preparation phase, execution phase and
verification phase. For instance, if we need to test our container’s clear() method, we need to:</p>

<ul>
  <li>create a container instance and fill it with some data (preparation phase)</li>
  <li>call clear() method (execution phase)</li>
  <li>ensure that size() now returns zero (verification phase)</li>
</ul>

<p>Let’s implement this scenario as a example TUT test.</p>

<h2 id="creating-a-test-group">Creating a test group</h2>

<p>To begin we need to create a new source file for our test group. Let’s call it test.cpp:</p>

<div class="CodeRay">
  <div class="code"><pre>
<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span> 
namespace tut 
{ 
    <span style="color:#080;font-weight:bold">struct</span> data <span style="color:#777">// (1)</span>
    { 
    };
    
    <span style="color:#080;font-weight:bold">typedef</span> test_group&lt;data&gt; tg; <span style="color:#777">// (2)</span>
    tg test_group(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my first test</span><span style="color:#710">&quot;</span></span>);    <span style="color:#777">// (3)</span>
}
</pre></div>
</div>

<p>Let’s outline what we’ve just done. </p>

<ul>
  <li>We included TUT header file (an obvious step).</li>
  <li>We defined test data structure. Any data that should be available to every test could be located in
this data structure. An instance of the structure is created before every test starts and is destroyed
right after the test ends, so you may use the structure’s constructor and destructor 
for initialization and cleanup purposes.</li>
  <li>We created an instance of the test group with the name “my first test”. Behind the scene the instance
registers itself with a global test runner, so the name shall be unique within the test application.</li>
</ul>

<h2 id="creating-a-test">Creating a test</h2>

<p>In TUT all tests have an unique <span class="accent">numbers</span>, not names, within their test group.
You can provide an optional name to the test by calling set_test_name() method.</p>

<div class="CodeRay">
  <div class="code"><pre>
<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;my_set.h&gt;</span>     
    
<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span> 
namespace tut 
{ 
    <span style="color:#080;font-weight:bold">struct</span> data <span style="color:#777">//</span>
    { 
    };
    
    <span style="color:#080;font-weight:bold">typedef</span> test_group&lt;data&gt; tg;
    tg test_group(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my first test</span><span style="color:#710">&quot;</span></span>);
    
    <span style="color:#080;font-weight:bold">typedef</span> tg::object testobject;
    
    template&lt;&gt; 
    template&lt;&gt; 
    <span style="color:#088;font-weight:bold">void</span> testobject::test&lt;<span style="color:#00D">1</span>&gt;() 
    { 
        set_test_name(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">clear</span><span style="color:#710">&quot;</span></span>);

        my::set s(<span style="color:#D20">'a'</span>,<span style="color:#D20">'b'</span>,<span style="color:#D20">'c'</span>);
        ensure_equals(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">has elements</span><span style="color:#710">&quot;</span></span>,s.size(),<span style="color:#00D">3</span>);

        s.clear();
        ensure_equals(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">has no elements</span><span style="color:#710">&quot;</span></span>,s.size(),<span style="color:#00D">0</span>);    
    }   
}; 
</pre></div>
</div>

<p>Our test is completed. Let walk through the code:</p>

<ul>
  <li>For the sake of brevity we had created yet another typedef for test object.</li>
  <li>We defined our test as a test <em>number 1</em>. We also gave it a human-readable name “clear”.</li>
  <li>We created an instance of our proprietary <em>set class</em> with three elements in it.</li>
  <li>We checked that the size() method in fact returns 3.</li>
  <li>We cleared the set.</li>
  <li>We verified that the size() returns zero now.</li>
</ul>

<h2 id="finally-the-main-module-of-the-test-application">Finally, the main module of the test application</h2>

<div class="CodeRay">
  <div class="code"><pre>
<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span>
<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut_reporter.h&gt;</span>
<span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;iostream&gt;</span>

using std::exception;
using std::cerr;
using std::endl;

namespace tut
{
    test_runner_singleton runner;
}

<span style="color:#0a8;font-weight:bold">int</span> main()
{
    tut::reporter reporter;
    tut::runner.get().set_callback(&amp;amp;reporter);

    tut::runner.get().run_tests();

    <span style="color:#080;font-weight:bold">return</span> !reporter.all_ok();
}
</pre></div>
</div>

<p>Here we see the minimum required implementation of the main module. It contains the instance of the 
runner (a singleton, as class name suggests), where test groups register themselves. It creates an
instance of a reporter (which can be extended or replaced to support virtually any target and style 
of the report. And finally, it runs all the tests in one batch.</p>

<p>Runner support a few more precise methods to run tests as well, such as “run all tests within a group”
or even “run a specific test within a group”.</p>

<p><em>We’re done.</em></p>


    </div>

    <div id="footer">

        <h1>
            <span>last change: 2013-12-18 11:19:40 +0100</span>
            <a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml11" alt="Valid XHTML 1.1" height="31" width="88" /></a>
            generated by <a href="http://webgen.gettalong.org">webgen</a>
        </h1>
    </div>
  </body>
</html>

<!--
    vim:ft=xhtml
 -->
