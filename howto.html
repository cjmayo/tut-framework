<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>TUT: C++ Template Unit Test Framework</title>
    <link rel="shortcut icon" href="tut.ico" />
    <meta name="keywords" content="C++ Unit Test Simple" />
    <meta name="description" content="TUT: C++ Template Unit Test Framework" />
    <meta name="generator" content="webgen - http://webgen.rubyforge.com/" />
    <link href="default.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div id="header">
      <h1>
        <a href="http://tut-framework.sourceforge.net/"><img src="tut.png" alt="tut logo"/></a>
        C++ Template Unit Test Framework
      </h1>
    </div>

    <div id="menu">
        <ul><li class="webgen-menu-level1 webgen-menu-submenu webgen-menu-submenu-inhierarchy"><a href="index.html" hreflang="en">/</a><ul><li class="webgen-menu-level2 webgen-menu-submenu"><a href="images/">Images</a><ul><li class="webgen-menu-level3"><a href="images/generated_by_webgen.png">Generated by webgen</a></li><li class="webgen-menu-level3"><a href="images/webgen_logo.png">Webgen logo</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="stylesheets/">Stylesheets</a><ul><li class="webgen-menu-level3"><a href="stylesheets/api.css">Api</a></li><li class="webgen-menu-level3"><a href="stylesheets/coderay-default.css">Coderay default</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="templates/">Templates</a><ul><li class="webgen-menu-level3"><a href="templates/api.template">Api</a></li><li class="webgen-menu-level3"><a href="templates/feed.template">Feed</a></li><li class="webgen-menu-level3"><a href="templates/sitemap.template">Sitemap</a></li><li class="webgen-menu-level3"><a href="templates/tag.template">Tag</a></li><li class="webgen-menu-level3"><a href="templates/tikz.template">Tikz</a></li></ul></li><li class="webgen-menu-level2"><a href="default.template">Default</a></li><li class="webgen-menu-level2"><a href="authors.html" hreflang="en">Authors</a></li><li class="webgen-menu-level2"><a href="copyright.html" hreflang="en">Copyright</a></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="download.html" hreflang="en">Download</a><ul><li class="webgen-menu-level3"><a href="download.html#file-releases">File releases</a></li><li class="webgen-menu-level3"><a href="download.html#development">Development</a></li></ul></li><li class="webgen-menu-level2"><a href="example.html" hreflang="en">Example</a></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="faq.html" hreflang="en">FAQ</a><ul><li class="webgen-menu-level3"><a href="faq.html#what-is-tut">What is TUT?</a></li><li class="webgen-menu-level3"><a href="faq.html#how-is-it-different-from-cunit-boosttest-">How is it different from C++Unit (boost::test, …)?</a></li><li class="webgen-menu-level3"><a href="faq.html#which-compilers-are-supported">Which compilers are supported?</a></li><li class="webgen-menu-level3"><a href="faq.html#can-we-test-private-methods">Can we test private methods?</a></li><li class="webgen-menu-level3"><a href="faq.html#can-we-use-strings-as-test-names-please">Can we use strings as test names, please?</a></li><li class="webgen-menu-level3"><a href="faq.html#how-about-test-fixtures-setupteardown-methods">How about test fixtures (setUp/tearDown methods)?</a></li><li class="webgen-menu-level3"><a href="faq.html#ive-taken-a-look-at-the-selftest-code-and-it-looks-awful">I’ve taken a look at the selftest code and it looks awful</a></li><li class="webgen-menu-level3"><a href="faq.html#is-it-possible-to-have-more-50-tests-per-group">Is it possible to have more 50 tests per group?</a></li><li class="webgen-menu-level3"><a href="faq.html#ive-used-ensureequals-method-and-compiler-refused-to-build-my-code-complaining-that-there-is-ambiguous-overload-for-operator">I’ve used ensure_equals() method and compiler refused to build my code complaining that there is ambiguous overload for operator«.</a></li><li class="webgen-menu-level3"><a href="faq.html#what-about-segmentation-faults-in-code-being-tested-what-about-deadlocks">What about segmentation faults in code being tested? What about deadlocks?</a></li><li class="webgen-menu-level3"><a href="faq.html#what-is-this-multi-process-testing-mentioned-in-the-summary">What is this multi-process testing mentioned in the summary?</a></li><li class="webgen-menu-level3"><a href="faq.html#where-can-i-ask-a-question">Where can I ask a question?</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-submenu webgen-menu-item-selected"><a href="howto.html" hreflang="en">How To</a><ul><li class="webgen-menu-level3"><a href="#tests-organization">Tests organization</a></li><li class="webgen-menu-level3"><a href="#tests">Tests</a></li><li class="webgen-menu-level3"><a href="#creating-a-test-group">Creating a test group</a></li><li class="webgen-menu-level3"><a href="#creating-a-test">Creating a test</a></li><li class="webgen-menu-level3"><a href="#finally-the-main-module-of-the-test-application">Finally, the main module of the test application</a></li></ul></li><li class="webgen-menu-level2"><a href="index.html" hreflang="en">Introduction</a></li><li class="webgen-menu-level2"><a href="links.html" hreflang="en">Links</a></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="news.html" hreflang="en">News</a><ul><li class="webgen-menu-level3"><a href="news.html#move-to-github">Move to Github</a></li><li class="webgen-menu-level3"><a href="news.html#doxygen-documentation">Doxygen documentation</a></li><li class="webgen-menu-level3"><a href="news.html#switch-to-waf">Switch to Waf</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2009-08-30">TUT-2009-08-30</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2008-11-30">TUT-2008-11-30</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2007-07-06">TUT-2007-07-06</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2007-03-19">TUT-2007-03-19</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2007-02-03">TUT-2007-02-03</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2006-11-04">TUT-2006-11-04</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2006-10-31">TUT-2006-10-31</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2006-03-29">TUT-2006-03-29</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2005-06-22">TUT-2005-06-22</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2005-05-19">TUT-2005-05-19</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2005-05-16">TUT-2005-05-16</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2004-03-26">TUT-2004-03-26</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-08-17">TUT-2003-08-17</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-07-04">TUT-2003-07-04</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-06-25">TUT-2003-06-25</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-04-28">TUT-2003-04-28</a></li></ul></li><li class="webgen-menu-level2"><a href="default.css">Default</a></li><li class="webgen-menu-level2"><a href="tut.ico">Tut</a></li><li class="webgen-menu-level2"><a href="tut.png">Tut</a></li><li class="webgen-menu-level2"><a href="forum.*.html">Forum</a></li><li class="webgen-menu-level2"><a href="source.*.html">Reference Manual</a></li></ul></li></ul>
    </div>

    <div id="body">
        <h1><span>minimum steps to make TUT work for you</span>How To </h1>
        
<h2 id="tests-organization">Tests organization</h2>

<p>Tests are compiled into a single binary (a test application).</p>

<p>The test application contains tests organized into test groups. Every test group
has a human-readable name (such as “payroll”). Normally every group is located
in it’s own source file. A group can contain an unlimited number
of tests. Every test has an unique number as test identifier (
C++ templates do not support specialization by a string value). </p>

<h2 id="tests">Tests</h2>

<p>A test is a function (method) implementing some specific scenario and checking 
if the code (unit) works as required. Every test usually checks only one specific 
bit of functionality. In every test we have a preparation phase, execution phase and
verification phase. For instance, if we need to test our container’s clear() method, we need to:</p>

<ul>
  <li>create a container instance and fill it with some data (preparation phase)</li>
  <li>call clear() method (execution phase)</li>
  <li>ensure that size() now returns zero (verification phase)</li>
</ul>

<p>Let’s implement this scenario as a example TUT test.</p>

<h2 id="creating-a-test-group">Creating a test group</h2>

<p>To begin we need to create a new source file for our test group. Let’s call it test.cpp:</p>

<div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span> 
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>namespace tut 
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>{ 
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>    <span style="color:#080;font-weight:bold">struct</span> data <span style="color:#777">// (1)</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    { 
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    };
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    <span style="color:#080;font-weight:bold">typedef</span> test_group&lt;data&gt; tg; <span style="color:#777">// (2)</span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    tg test_group(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my first test</span><span style="color:#710">&quot;</span></span>);    <span style="color:#777">// (3)</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>}
</pre></div>
</div>

<p>Let’s outline what we’ve just done. </p>

<ul>
  <li>We included TUT header file (an obvious step).</li>
  <li>We defined test data structure. Any data that should be available to every test could be located in
this data structure. An instance of the structure is created before every test starts and is destroyed
right after the test ends, so you may use the structure’s constructor and destructor 
for initialization and cleanup purposes.</li>
  <li>We created an instance of the test group with the name “my first test”. Behind the scene the instance
registers itself with a global test runner, so the name shall be unique within the test application.</li>
</ul>

<h2 id="creating-a-test">Creating a test</h2>

<p>In TUT all tests have an unique <span class="accent">numbers</span>, not names, within their test group.
You can provide an optional name to the test by calling set_test_name() method.</p>

<div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;my_set.h&gt;</span>     
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span> 
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>namespace tut 
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>{ 
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    <span style="color:#080;font-weight:bold">struct</span> data <span style="color:#777">//</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    { 
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    };
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>    <span style="color:#080;font-weight:bold">typedef</span> test_group&lt;data&gt; tg;
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>    tg test_group(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my first test</span><span style="color:#710">&quot;</span></span>);
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>    
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>    <span style="color:#080;font-weight:bold">typedef</span> tg::object testobject;
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>    
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>    template&lt;&gt; 
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    template&lt;&gt; 
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>    <span style="color:#088;font-weight:bold">void</span> testobject::test&lt;<span style="color:#00D">1</span>&gt;() 
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>    { 
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>        set_test_name(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">clear</span><span style="color:#710">&quot;</span></span>);
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        my::set s(<span style="color:#D20">'a'</span>,<span style="color:#D20">'b'</span>,<span style="color:#D20">'c'</span>);
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        ensure_equals(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">has elements</span><span style="color:#710">&quot;</span></span>,s.size(),<span style="color:#00D">3</span>);
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>        s.clear();
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>        ensure_equals(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">has no elements</span><span style="color:#710">&quot;</span></span>,s.size(),<span style="color:#00D">0</span>);    
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>    }   
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>}; 
</pre></div>
</div>

<p>Our test is completed. Let walk through the code:</p>

<ul>
  <li>For the sake of brevity we had created yet another typedef for test object.</li>
  <li>We defined our test as a test <em>number 1</em>. We also gave it a human-readable name “clear”.</li>
  <li>We created an instance of our proprietary <em>set class</em> with three elements in it.</li>
  <li>We checked that the size() method in fact returns 3.</li>
  <li>We cleared the set.</li>
  <li>We verified that the size() returns zero now.</li>
</ul>

<h2 id="finally-the-main-module-of-the-test-application">Finally, the main module of the test application</h2>

<div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut_reporter.h&gt;</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;iostream&gt;</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>using std::exception;
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>using std::cerr;
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>using std::endl;
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>namespace tut
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>{
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>    test_runner_singleton runner;
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>}
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span><span style="color:#0a8;font-weight:bold">int</span> main()
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>{
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    tut::reporter reporter;
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>    tut::runner.get().set_callback(&amp;amp;reporter);
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>    tut::runner.get().run_tests();
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>    <span style="color:#080;font-weight:bold">return</span> !reporter.all_ok();
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>}
</pre></div>
</div>

<p>Here we see the minimum required implementation of the main module. It contains the instance of the 
runner (a singleton, as class name suggests), where test groups register themselves. It creates an
instance of a reporter (which can be extended or replaced to support virtually any target and style 
of the report. And finally, it runs all the tests in one batch.</p>

<p>Runner support a few more precise methods to run tests as well, such as “run all tests within a group”
or even “run a specific test within a group”.</p>

<p><em>We’re done.</em></p>


    </div>

    <div id="footer">

        <h1>
            <span>last change: 2013-12-17 23:00:23 +0100</span>
            <a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml11" alt="Valid XHTML 1.1" height="31" width="88" /></a>
            created with <a href="http://webgen.rubyforge.org/index.html">webgen</a>
        </h1>
    </div>
  </body>
</html>

<!--
    vim:ft=xhtml
 -->
