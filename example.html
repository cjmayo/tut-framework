<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>TUT: C++ Template Unit Test Framework</title>
    <link rel="shortcut icon" href="tut.ico" />
    <meta name="keywords" content="C++ Unit Test Simple" />
    <meta name="description" content="TUT: C++ Template Unit Test Framework" />
    <meta name="generator" content="webgen - http://webgen.rubyforge.com/" />
    <link href="default.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div id="header">
      <h1>
        <a href="http://tut-framework.sourceforge.net/"><img src="tut.png" alt="tut logo"/></a>
        C++ Template Unit Test Framework
      </h1>
    </div>

    <div id="menu">
        <ul><li class="webgen-menu-level1 webgen-menu-submenu webgen-menu-submenu-inhierarchy"><a href="index.html" hreflang="en">/</a><ul><li class="webgen-menu-level2 webgen-menu-submenu"><a href="images/">Images</a><ul><li class="webgen-menu-level3"><a href="images/generated_by_webgen.png">Generated by webgen</a></li><li class="webgen-menu-level3"><a href="images/webgen_logo.png">Webgen logo</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="stylesheets/">Stylesheets</a><ul><li class="webgen-menu-level3"><a href="stylesheets/api.css">Api</a></li><li class="webgen-menu-level3"><a href="stylesheets/coderay-default.css">Coderay default</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="templates/">Templates</a><ul><li class="webgen-menu-level3"><a href="templates/api.template">Api</a></li><li class="webgen-menu-level3"><a href="templates/feed.template">Feed</a></li><li class="webgen-menu-level3"><a href="templates/sitemap.template">Sitemap</a></li><li class="webgen-menu-level3"><a href="templates/tag.template">Tag</a></li><li class="webgen-menu-level3"><a href="templates/tikz.template">Tikz</a></li></ul></li><li class="webgen-menu-level2"><a href="default.template">Default</a></li><li class="webgen-menu-level2"><a href="authors.html" hreflang="en">Authors</a></li><li class="webgen-menu-level2"><a href="copyright.html" hreflang="en">Copyright</a></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="download.html" hreflang="en">Download</a><ul><li class="webgen-menu-level3"><a href="download.html#file-releases">File releases</a></li><li class="webgen-menu-level3"><a href="download.html#development">Development</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-item-selected"><a href="example.html" hreflang="en">Example</a></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="faq.html" hreflang="en">FAQ</a><ul><li class="webgen-menu-level3"><a href="faq.html#what-is-tut">What is TUT?</a></li><li class="webgen-menu-level3"><a href="faq.html#how-is-it-different-from-cunit-boosttest-">How is it different from C++Unit (boost::test, …)?</a></li><li class="webgen-menu-level3"><a href="faq.html#which-compilers-are-supported">Which compilers are supported?</a></li><li class="webgen-menu-level3"><a href="faq.html#can-we-test-private-methods">Can we test private methods?</a></li><li class="webgen-menu-level3"><a href="faq.html#can-we-use-strings-as-test-names-please">Can we use strings as test names, please?</a></li><li class="webgen-menu-level3"><a href="faq.html#how-about-test-fixtures-setupteardown-methods">How about test fixtures (setUp/tearDown methods)?</a></li><li class="webgen-menu-level3"><a href="faq.html#ive-taken-a-look-at-the-selftest-code-and-it-looks-awful">I’ve taken a look at the selftest code and it looks awful</a></li><li class="webgen-menu-level3"><a href="faq.html#is-it-possible-to-have-more-50-tests-per-group">Is it possible to have more 50 tests per group?</a></li><li class="webgen-menu-level3"><a href="faq.html#ive-used-ensureequals-method-and-compiler-refused-to-build-my-code-complaining-that-there-is-ambiguous-overload-for-operator">I’ve used ensure_equals() method and compiler refused to build my code complaining that there is ambiguous overload for operator«.</a></li><li class="webgen-menu-level3"><a href="faq.html#what-about-segmentation-faults-in-code-being-tested-what-about-deadlocks">What about segmentation faults in code being tested? What about deadlocks?</a></li><li class="webgen-menu-level3"><a href="faq.html#what-is-this-multi-process-testing-mentioned-in-the-summary">What is this multi-process testing mentioned in the summary?</a></li><li class="webgen-menu-level3"><a href="faq.html#where-can-i-ask-a-question">Where can I ask a question?</a></li></ul></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="howto.html" hreflang="en">How To</a><ul><li class="webgen-menu-level3"><a href="howto.html#tests-organization">Tests organization</a></li><li class="webgen-menu-level3"><a href="howto.html#tests">Tests</a></li><li class="webgen-menu-level3"><a href="howto.html#creating-a-test-group">Creating a test group</a></li><li class="webgen-menu-level3"><a href="howto.html#creating-a-test">Creating a test</a></li><li class="webgen-menu-level3"><a href="howto.html#finally-the-main-module-of-the-test-application">Finally, the main module of the test application</a></li></ul></li><li class="webgen-menu-level2"><a href="index.html" hreflang="en">Introduction</a></li><li class="webgen-menu-level2"><a href="links.html" hreflang="en">Links</a></li><li class="webgen-menu-level2 webgen-menu-submenu"><a href="news.html" hreflang="en">News</a><ul><li class="webgen-menu-level3"><a href="news.html#move-to-github">Move to Github</a></li><li class="webgen-menu-level3"><a href="news.html#doxygen-documentation">Doxygen documentation</a></li><li class="webgen-menu-level3"><a href="news.html#switch-to-waf">Switch to Waf</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2009-08-30">TUT-2009-08-30</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2008-11-30">TUT-2008-11-30</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2007-07-06">TUT-2007-07-06</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2007-03-19">TUT-2007-03-19</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2007-02-03">TUT-2007-02-03</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2006-11-04">TUT-2006-11-04</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2006-10-31">TUT-2006-10-31</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2006-03-29">TUT-2006-03-29</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2005-06-22">TUT-2005-06-22</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2005-05-19">TUT-2005-05-19</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2005-05-16">TUT-2005-05-16</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2004-03-26">TUT-2004-03-26</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-08-17">TUT-2003-08-17</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-07-04">TUT-2003-07-04</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-06-25">TUT-2003-06-25</a></li><li class="webgen-menu-level3"><a href="news.html#tut-2003-04-28">TUT-2003-04-28</a></li></ul></li><li class="webgen-menu-level2"><a href="default.css">Default</a></li><li class="webgen-menu-level2"><a href="tut.ico">Tut</a></li><li class="webgen-menu-level2"><a href="tut.png">Tut</a></li><li class="webgen-menu-level2"><a href="forum.*.html">Forum</a></li><li class="webgen-menu-level2"><a href="source.*.html">Reference Manual</a></li></ul></li></ul>
    </div>

    <div id="body">
        <h1><span>it's better to see once...</span>Example </h1>
        
<p>An example testgroup which tests a std::auto_ptr implementation. Of course, those tests are far from complete.</p>

<div class="CodeRay">
  <div class="code"><pre><span class="line-numbers">  <a href="#n1" name="n1">1</a></span>
<span class="line-numbers">  <a href="#n2" name="n2">2</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;tut/tut.hpp&gt;</span>
<span class="line-numbers">  <a href="#n3" name="n3">3</a></span><span style="color:#579">#include</span> <span style="color:#B44;font-weight:bold">&lt;memory&gt;</span>
<span class="line-numbers">  <a href="#n4" name="n4">4</a></span>
<span class="line-numbers">  <a href="#n5" name="n5">5</a></span>using std::auto_ptr;
<span class="line-numbers">  <a href="#n6" name="n6">6</a></span>
<span class="line-numbers">  <a href="#n7" name="n7">7</a></span><span style="color:#777">/**</span>
<span class="line-numbers">  <a href="#n8" name="n8">8</a></span><span style="color:#777"> * This example test group tests std::auto_ptr implementation.</span>
<span class="line-numbers">  <a href="#n9" name="n9">9</a></span><span style="color:#777"> * Tests are far from full, of course.</span>
<span class="line-numbers"> <strong><a href="#n10" name="n10">10</a></strong></span><span style="color:#777"> */</span>
<span class="line-numbers"> <a href="#n11" name="n11">11</a></span>namespace tut
<span class="line-numbers"> <a href="#n12" name="n12">12</a></span>{
<span class="line-numbers"> <a href="#n13" name="n13">13</a></span><span style="color:#777">/**</span>
<span class="line-numbers"> <a href="#n14" name="n14">14</a></span><span style="color:#777"> * Struct which may contain test data members.</span>
<span class="line-numbers"> <a href="#n15" name="n15">15</a></span><span style="color:#777"> * Test object (class that contains test methods)</span>
<span class="line-numbers"> <a href="#n16" name="n16">16</a></span><span style="color:#777"> * will inherite from it, so each test method can</span>
<span class="line-numbers"> <a href="#n17" name="n17">17</a></span><span style="color:#777"> * access members directly.</span>
<span class="line-numbers"> <a href="#n18" name="n18">18</a></span><span style="color:#777"> *</span>
<span class="line-numbers"> <a href="#n19" name="n19">19</a></span><span style="color:#777"> * Additionally, for each test, test object is re-created</span>
<span class="line-numbers"> <strong><a href="#n20" name="n20">20</a></strong></span><span style="color:#777"> * using defaut constructor. Thus, any prepare work can be put</span>
<span class="line-numbers"> <a href="#n21" name="n21">21</a></span><span style="color:#777"> * into default constructor.</span>
<span class="line-numbers"> <a href="#n22" name="n22">22</a></span><span style="color:#777"> *</span>
<span class="line-numbers"> <a href="#n23" name="n23">23</a></span><span style="color:#777"> * Finally, after each test, test object is destroyed independently</span>
<span class="line-numbers"> <a href="#n24" name="n24">24</a></span><span style="color:#777"> * of test result, so any cleanup work should be located in destructor.</span>
<span class="line-numbers"> <a href="#n25" name="n25">25</a></span><span style="color:#777"> */</span>
<span class="line-numbers"> <a href="#n26" name="n26">26</a></span><span style="color:#080;font-weight:bold">struct</span> auto_ptr_data
<span class="line-numbers"> <a href="#n27" name="n27">27</a></span>{
<span class="line-numbers"> <a href="#n28" name="n28">28</a></span>    <span style="color:#777">/**</span>
<span class="line-numbers"> <a href="#n29" name="n29">29</a></span><span style="color:#777">     * Type used to check scope lifetime of auto_ptr object.</span>
<span class="line-numbers"> <strong><a href="#n30" name="n30">30</a></strong></span><span style="color:#777">     * Sets extern boolean value into true at constructor, and</span>
<span class="line-numbers"> <a href="#n31" name="n31">31</a></span><span style="color:#777">     * to false at destructor.</span>
<span class="line-numbers"> <a href="#n32" name="n32">32</a></span><span style="color:#777">     */</span>
<span class="line-numbers"> <a href="#n33" name="n33">33</a></span>    <span style="color:#0a8;font-weight:bold">bool</span> exists;
<span class="line-numbers"> <a href="#n34" name="n34">34</a></span>
<span class="line-numbers"> <a href="#n35" name="n35">35</a></span>    <span style="color:#080;font-weight:bold">struct</span> existing
<span class="line-numbers"> <a href="#n36" name="n36">36</a></span>    {
<span class="line-numbers"> <a href="#n37" name="n37">37</a></span>        <span style="color:#0a8;font-weight:bold">bool</span>&amp; s_;
<span class="line-numbers"> <a href="#n38" name="n38">38</a></span>        existing(<span style="color:#0a8;font-weight:bold">bool</span>&amp; s) : s_(s)
<span class="line-numbers"> <a href="#n39" name="n39">39</a></span>        {
<span class="line-numbers"> <strong><a href="#n40" name="n40">40</a></strong></span>            s_ = <span style="color:#069">true</span>;
<span class="line-numbers"> <a href="#n41" name="n41">41</a></span>        }
<span class="line-numbers"> <a href="#n42" name="n42">42</a></span>
<span class="line-numbers"> <a href="#n43" name="n43">43</a></span>        ~existing()
<span class="line-numbers"> <a href="#n44" name="n44">44</a></span>        {
<span class="line-numbers"> <a href="#n45" name="n45">45</a></span>            s_ = <span style="color:#069">false</span>;
<span class="line-numbers"> <a href="#n46" name="n46">46</a></span>        }
<span class="line-numbers"> <a href="#n47" name="n47">47</a></span>    };
<span class="line-numbers"> <a href="#n48" name="n48">48</a></span>
<span class="line-numbers"> <a href="#n49" name="n49">49</a></span>    auto_ptr_data(): exists(<span style="color:#069">false</span>) { }
<span class="line-numbers"> <strong><a href="#n50" name="n50">50</a></strong></span>
<span class="line-numbers"> <a href="#n51" name="n51">51</a></span>    virtual ~auto_ptr_data() { }
<span class="line-numbers"> <a href="#n52" name="n52">52</a></span>};
<span class="line-numbers"> <a href="#n53" name="n53">53</a></span>
<span class="line-numbers"> <a href="#n54" name="n54">54</a></span><span style="color:#777">/**</span>
<span class="line-numbers"> <a href="#n55" name="n55">55</a></span><span style="color:#777"> * This group of declarations is just to register</span>
<span class="line-numbers"> <a href="#n56" name="n56">56</a></span><span style="color:#777"> * test group in test-application-wide singleton.</span>
<span class="line-numbers"> <a href="#n57" name="n57">57</a></span><span style="color:#777"> * Name of test group object (auto_ptr_group) shall</span>
<span class="line-numbers"> <a href="#n58" name="n58">58</a></span><span style="color:#777"> * be unique in tut:: namespace. Alternatively, you</span>
<span class="line-numbers"> <a href="#n59" name="n59">59</a></span><span style="color:#777"> * you may put it into anonymous namespace.</span>
<span class="line-numbers"> <strong><a href="#n60" name="n60">60</a></strong></span><span style="color:#777"> */</span>
<span class="line-numbers"> <a href="#n61" name="n61">61</a></span><span style="color:#080;font-weight:bold">typedef</span> test_group&lt;auto_ptr_data&gt; tf;
<span class="line-numbers"> <a href="#n62" name="n62">62</a></span><span style="color:#080;font-weight:bold">typedef</span> tf::object object;
<span class="line-numbers"> <a href="#n63" name="n63">63</a></span>tf auto_ptr_group(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">std::auto_ptr</span><span style="color:#710">&quot;</span></span>);
<span class="line-numbers"> <a href="#n64" name="n64">64</a></span>
<span class="line-numbers"> <a href="#n65" name="n65">65</a></span><span style="color:#777">/**</span>
<span class="line-numbers"> <a href="#n66" name="n66">66</a></span><span style="color:#777"> * Checks default constructor.</span>
<span class="line-numbers"> <a href="#n67" name="n67">67</a></span><span style="color:#777"> */</span>
<span class="line-numbers"> <a href="#n68" name="n68">68</a></span>template&lt;&gt;
<span class="line-numbers"> <a href="#n69" name="n69">69</a></span>template&lt;&gt;
<span class="line-numbers"> <strong><a href="#n70" name="n70">70</a></strong></span><span style="color:#088;font-weight:bold">void</span> object::test&lt;<span style="color:#00D">1</span>&gt;()
<span class="line-numbers"> <a href="#n71" name="n71">71</a></span>{
<span class="line-numbers"> <a href="#n72" name="n72">72</a></span>    auto_ptr&lt;existing&gt; ap;
<span class="line-numbers"> <a href="#n73" name="n73">73</a></span>    ensure(ap.get() == <span style="color:#00D">0</span>);
<span class="line-numbers"> <a href="#n74" name="n74">74</a></span>    ensure(ap.operator-&gt;() == <span style="color:#00D">0</span>);
<span class="line-numbers"> <a href="#n75" name="n75">75</a></span>}
<span class="line-numbers"> <a href="#n76" name="n76">76</a></span>
<span class="line-numbers"> <a href="#n77" name="n77">77</a></span><span style="color:#777">/**</span>
<span class="line-numbers"> <a href="#n78" name="n78">78</a></span><span style="color:#777"> * Checks constructor with object</span>
<span class="line-numbers"> <a href="#n79" name="n79">79</a></span><span style="color:#777"> */</span>
<span class="line-numbers"> <strong><a href="#n80" name="n80">80</a></strong></span>template&lt;&gt;
<span class="line-numbers"> <a href="#n81" name="n81">81</a></span>template&lt;&gt;
<span class="line-numbers"> <a href="#n82" name="n82">82</a></span><span style="color:#088;font-weight:bold">void</span> object::test&lt;<span style="color:#00D">2</span>&gt;()
<span class="line-numbers"> <a href="#n83" name="n83">83</a></span>{
<span class="line-numbers"> <a href="#n84" name="n84">84</a></span>    {
<span class="line-numbers"> <a href="#n85" name="n85">85</a></span>        auto_ptr&lt;existing&gt; ap(new existing(exists));
<span class="line-numbers"> <a href="#n86" name="n86">86</a></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">get</span><span style="color:#710">&quot;</span></span>, ap.get() != <span style="color:#00D">0</span>);
<span class="line-numbers"> <a href="#n87" name="n87">87</a></span>        ensure_equals(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">constructed</span><span style="color:#710">&quot;</span></span>, exists, <span style="color:#069">true</span>);
<span class="line-numbers"> <a href="#n88" name="n88">88</a></span>    }
<span class="line-numbers"> <a href="#n89" name="n89">89</a></span>    <span style="color:#777">// ptr left scope</span>
<span class="line-numbers"> <strong><a href="#n90" name="n90">90</a></strong></span>    ensure_equals(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">destructed</span><span style="color:#710">&quot;</span></span>, exists, <span style="color:#069">false</span>);
<span class="line-numbers"> <a href="#n91" name="n91">91</a></span>}
<span class="line-numbers"> <a href="#n92" name="n92">92</a></span>
<span class="line-numbers"> <a href="#n93" name="n93">93</a></span><span style="color:#777">/**</span>
<span class="line-numbers"> <a href="#n94" name="n94">94</a></span><span style="color:#777"> * Checks operator -&gt; and get()</span>
<span class="line-numbers"> <a href="#n95" name="n95">95</a></span><span style="color:#777"> */</span>
<span class="line-numbers"> <a href="#n96" name="n96">96</a></span>template&lt;&gt;
<span class="line-numbers"> <a href="#n97" name="n97">97</a></span>template&lt;&gt;
<span class="line-numbers"> <a href="#n98" name="n98">98</a></span><span style="color:#088;font-weight:bold">void</span> object::test&lt;<span style="color:#00D">3</span>&gt;()
<span class="line-numbers"> <a href="#n99" name="n99">99</a></span>{
<span class="line-numbers"><strong><a href="#n100" name="n100">100</a></strong></span>    auto_ptr&lt;existing&gt; ap(new existing(exists));
<span class="line-numbers"><a href="#n101" name="n101">101</a></span>    existing* p1 = ap.get();
<span class="line-numbers"><a href="#n102" name="n102">102</a></span>    existing* p2 = ap.operator-&gt;();
<span class="line-numbers"><a href="#n103" name="n103">103</a></span>    ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">get equiv -&gt;</span><span style="color:#710">&quot;</span></span>, p1 == p2);
<span class="line-numbers"><a href="#n104" name="n104">104</a></span>    <span style="color:#777">// ensure no losing ownership</span>
<span class="line-numbers"><a href="#n105" name="n105">105</a></span>    p1 = ap.get();
<span class="line-numbers"><a href="#n106" name="n106">106</a></span>    ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">still owner</span><span style="color:#710">&quot;</span></span>, p1 == p2);
<span class="line-numbers"><a href="#n107" name="n107">107</a></span>}
<span class="line-numbers"><a href="#n108" name="n108">108</a></span>
<span class="line-numbers"><a href="#n109" name="n109">109</a></span><span style="color:#777">/**</span>
<span class="line-numbers"><strong><a href="#n110" name="n110">110</a></strong></span><span style="color:#777"> * Checks release()</span>
<span class="line-numbers"><a href="#n111" name="n111">111</a></span><span style="color:#777"> */</span>
<span class="line-numbers"><a href="#n112" name="n112">112</a></span>template&lt;&gt;
<span class="line-numbers"><a href="#n113" name="n113">113</a></span>template&lt;&gt;
<span class="line-numbers"><a href="#n114" name="n114">114</a></span><span style="color:#088;font-weight:bold">void</span> object::test&lt;<span style="color:#00D">4</span>&gt;()
<span class="line-numbers"><a href="#n115" name="n115">115</a></span>{
<span class="line-numbers"><a href="#n116" name="n116">116</a></span>    {
<span class="line-numbers"><a href="#n117" name="n117">117</a></span>        auto_ptr&lt;existing&gt; ap(new existing(exists));
<span class="line-numbers"><a href="#n118" name="n118">118</a></span>        existing* p1 = ap.get();
<span class="line-numbers"><a href="#n119" name="n119">119</a></span>        auto_ptr&lt;existing&gt; ap2(ap.release());
<span class="line-numbers"><strong><a href="#n120" name="n120">120</a></strong></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">same pointer</span><span style="color:#710">&quot;</span></span>, p1 == ap2.get());
<span class="line-numbers"><a href="#n121" name="n121">121</a></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">lost ownership</span><span style="color:#710">&quot;</span></span>, ap.get() == <span style="color:#00D">0</span>);
<span class="line-numbers"><a href="#n122" name="n122">122</a></span>    }
<span class="line-numbers"><a href="#n123" name="n123">123</a></span>    ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">destructed</span><span style="color:#710">&quot;</span></span>, exists == <span style="color:#069">false</span>);
<span class="line-numbers"><a href="#n124" name="n124">124</a></span>}
<span class="line-numbers"><a href="#n125" name="n125">125</a></span>
<span class="line-numbers"><a href="#n126" name="n126">126</a></span><span style="color:#777">/**</span>
<span class="line-numbers"><a href="#n127" name="n127">127</a></span><span style="color:#777"> * Checks assignment.</span>
<span class="line-numbers"><a href="#n128" name="n128">128</a></span><span style="color:#777"> */</span>
<span class="line-numbers"><a href="#n129" name="n129">129</a></span>template&lt;&gt;
<span class="line-numbers"><strong><a href="#n130" name="n130">130</a></strong></span>template&lt;&gt;
<span class="line-numbers"><a href="#n131" name="n131">131</a></span><span style="color:#088;font-weight:bold">void</span> object::test&lt;<span style="color:#00D">5</span>&gt;()
<span class="line-numbers"><a href="#n132" name="n132">132</a></span>{
<span class="line-numbers"><a href="#n133" name="n133">133</a></span>    {
<span class="line-numbers"><a href="#n134" name="n134">134</a></span>        auto_ptr&lt;existing&gt; ap(new existing(exists));
<span class="line-numbers"><a href="#n135" name="n135">135</a></span>        existing* p1 = ap.get();
<span class="line-numbers"><a href="#n136" name="n136">136</a></span>        auto_ptr&lt;existing&gt; ap2;
<span class="line-numbers"><a href="#n137" name="n137">137</a></span>        ap2 = ap;
<span class="line-numbers"><a href="#n138" name="n138">138</a></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">same pointer</span><span style="color:#710">&quot;</span></span>, p1 == ap2.get());
<span class="line-numbers"><a href="#n139" name="n139">139</a></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">lost ownership</span><span style="color:#710">&quot;</span></span>, ap.get() == <span style="color:#00D">0</span>);
<span class="line-numbers"><strong><a href="#n140" name="n140">140</a></strong></span>    }
<span class="line-numbers"><a href="#n141" name="n141">141</a></span>    ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">destructed</span><span style="color:#710">&quot;</span></span>, exists == <span style="color:#069">false</span>);
<span class="line-numbers"><a href="#n142" name="n142">142</a></span>}
<span class="line-numbers"><a href="#n143" name="n143">143</a></span>
<span class="line-numbers"><a href="#n144" name="n144">144</a></span><span style="color:#777">/**</span>
<span class="line-numbers"><a href="#n145" name="n145">145</a></span><span style="color:#777"> * Checks copy constructor.</span>
<span class="line-numbers"><a href="#n146" name="n146">146</a></span><span style="color:#777"> */</span>
<span class="line-numbers"><a href="#n147" name="n147">147</a></span>template&lt;&gt;
<span class="line-numbers"><a href="#n148" name="n148">148</a></span>template&lt;&gt;
<span class="line-numbers"><a href="#n149" name="n149">149</a></span><span style="color:#088;font-weight:bold">void</span> object::test&lt;<span style="color:#00D">6</span>&gt;()
<span class="line-numbers"><strong><a href="#n150" name="n150">150</a></strong></span>{
<span class="line-numbers"><a href="#n151" name="n151">151</a></span>    {
<span class="line-numbers"><a href="#n152" name="n152">152</a></span>        auto_ptr&lt;existing&gt; ap(new existing(exists));
<span class="line-numbers"><a href="#n153" name="n153">153</a></span>        existing* p1 = ap.get();
<span class="line-numbers"><a href="#n154" name="n154">154</a></span>        auto_ptr&lt;existing&gt; ap2(ap);
<span class="line-numbers"><a href="#n155" name="n155">155</a></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">same pointer</span><span style="color:#710">&quot;</span></span>, p1 == ap2.get());
<span class="line-numbers"><a href="#n156" name="n156">156</a></span>        ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">lost ownership</span><span style="color:#710">&quot;</span></span>, ap.get() == <span style="color:#00D">0</span>);
<span class="line-numbers"><a href="#n157" name="n157">157</a></span>    }
<span class="line-numbers"><a href="#n158" name="n158">158</a></span>    ensure(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">destructed</span><span style="color:#710">&quot;</span></span>, exists == <span style="color:#069">false</span>);
<span class="line-numbers"><a href="#n159" name="n159">159</a></span>}
<span class="line-numbers"><strong><a href="#n160" name="n160">160</a></strong></span>
<span class="line-numbers"><a href="#n161" name="n161">161</a></span>}
<span class="line-numbers"><a href="#n162" name="n162">162</a></span>
<span class="line-numbers"><a href="#n163" name="n163">163</a></span>
</pre></div>
</div>


    </div>

    <div id="footer">

        <h1>
            <span>last change: 2013-12-17 23:01:02 +0100</span>
            <a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml11" alt="Valid XHTML 1.1" height="31" width="88" /></a>
            created with <a href="http://webgen.rubyforge.org/index.html">webgen</a>
        </h1>
    </div>
  </body>
</html>

<!--
    vim:ft=xhtml
 -->
